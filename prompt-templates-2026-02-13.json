{
  "templates": [
    {
      "template_key": "WORLD_BUILDING",
      "template_name": "世界构建",
      "template_content": "<system>\n你是资深的世界观设计师，擅长为{genre}类型的小说构建真实、自洽的世界观。\n</system>\n\n<task>\n【设计任务】\n为小说《{title}》构建完整的世界观设定。\n\n【核心要求】\n- 主题契合：世界观必须支撑主题\"{theme}\"\n- 简介匹配：为简介中的情节提供合理背景\n- 类型适配：符合{genre}类型的特征\n- 规模适当：根据题材选择合适的设定尺度\n</task>\n\n<input priority=\"P0\">\n【项目信息】\n书名：{title}\n类型：{genre}\n主题：{theme}\n简介：{description}\n</input>\n\n<guidelines priority=\"P1\">\n【类型指导原则】\n\n**现代都市/言情/青春**：\n- 时间：当代社会（2020年代）或近未来（2030-2050年）\n- 避免：大崩解、纪元、末日等宏大概念\n- 重点：具体城市环境、职场文化、社会现状\n\n**历史/古代**：\n- 时间：明确的历史朝代或虚构古代\n- 重点：时代特征、礼教制度、阶级分化\n\n**玄幻/仙侠/修真**：\n- 时间：修炼文明的特定时期\n- 重点：修炼规则、灵气环境、门派势力\n\n**科幻**：\n- 时间：未来明确时期（如2150年、星际时代初期）\n- 重点：科技水平、社会形态、文明转折\n\n**奇幻/魔法**：\n- 时间：魔法文明的特定阶段\n- 重点：魔法体系、种族关系、大陆格局\n\n**设定尺度控制**：\n- 现代都市：聚焦某个城市、行业、阶层\n- 校园青春：学校环境、学生生活、成长困境\n- 职场言情：公司文化、行业特点、职业压力\n- 史诗题材：才需要宏大的世界观架构\n</guidelines>\n\n<output priority=\"P0\">\n【输出格式】\n生成包含以下四个字段的JSON对象，每个字段300-500字：\n\n1. **time_period**（时间背景与社会状态）\n   - 根据类型设定合适规模的时间背景\n   - 现代题材：具体社会特征（如：2024年北京，互联网行业高速发展）\n   - 历史题材：明确朝代和阶段（如：明朝嘉靖年间，海禁政策下的沿海）\n   - 幻想题材：文明发展阶段，具体而非空泛\n   - 阐明时代核心矛盾和社会焦虑\n\n2. **location**（空间环境与地理特征）\n   - 故事主要发生的空间环境\n   - 现代题材：具体城市名或类型\n   - 环境如何影响居民生存方式\n   - 标志性场景描述\n\n3. **atmosphere**（感官体验与情感基调）\n   - 身临其境的感官细节（视觉、听觉、嗅觉）\n   - 美学风格和色彩基调\n   - 居民心理状态和情绪氛围\n   - 与主题情感呼应\n\n4. **rules**（世界规则与社会结构）\n   - 世界运行的核心法则\n   - 现代题材：社会规则、行业潜规则、人际法则\n   - 幻想题材:力量体系、社会等级、资源分配\n   - 权力结构和利益格局\n   - 社会禁忌及后果\n\n【格式规范】\n- 纯JSON输出，以{{开始、}}结束\n- 无markdown标记、代码块符号\n- 字段值为完整段落文本\n- 不使用特殊符号包裹内容\n- 提供充实原创内容\n\n【JSON示例】\n{{\n  \"time_period\": \"时间背景与社会状态的详细描述（300-500字）\",\n  \"location\": \"空间环境与地理特征的详细描述（300-500字）\",\n  \"atmosphere\": \"感官体验与情感基调的详细描述（300-500字）\",\n  \"rules\": \"世界规则与社会结构的详细描述（300-500字）\"\n}}\n</output>\n\n<constraints>\n【必须遵守】\n✅ 简介契合：为简介情节提供合理背景\n✅ 类型适配：符合{genre}的特征\n✅ 主题贴合：支撑主题\"{theme}\"\n✅ 具象化：用具体细节而非空洞概念\n✅ 逻辑自洽：所有设定相互支撑\n\n【禁止事项】\n❌ 生成与类型不匹配的设定\n❌ 为小规模题材使用宏大世界观\n❌ 使用模板化、空泛的表达\n❌ 输出markdown或代码块标记\n</constraints>",
      "description": "用于生成小说世界观设定，包括时间背景、地理位置、氛围基调和世界规则",
      "category": "世界构建",
      "parameters": "[\"title\", \"theme\", \"genre\", \"description\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "60eeefc32f222e22"
    },
    {
      "template_key": "CHARACTERS_BATCH_GENERATION",
      "template_name": "批量角色生成",
      "template_content": "<system>\n你是专业的角色设定师，擅长为{genre}类型的小说创建立体丰满的角色。\n</system>\n\n<task>\n【生成任务】\n生成{count}个角色和组织实体。\n\n【数量要求 - 严格遵守】\n数组中必须精确包含{count}个对象，不多不少。\n\n【实体类型分配】\n- 至少1个主角（protagonist）\n- 多个配角（supporting）\n- 可包含反派（antagonist）\n- 可包含1-2个高影响力组织（power_level: 70-95）\n</task>\n\n<worldview priority=\"P0\">\n【世界观信息】\n时间背景：{time_period}\n地理位置：{location}\n氛围基调：{atmosphere}\n世界规则：{rules}\n\n主题：{theme}\n类型：{genre}\n</worldview>\n\n<requirements priority=\"P1\">\n【特殊要求】\n{requirements}\n</requirements>\n\n<output priority=\"P0\">\n【输出格式】\n返回纯JSON数组，每个对象包含：\n\n**角色对象**：\n{{\n  \"name\": \"角色姓名\",\n  \"age\": 25,\n  \"gender\": \"男/女/其他\",\n  \"is_organization\": false,\n  \"role_type\": \"protagonist/supporting/antagonist\",\n  \"personality\": \"性格特点（100-200字）：核心性格、优缺点、特殊习惯\",\n  \"background\": \"背景故事（100-200字）：家庭背景、成长经历、重要转折\",\n  \"appearance\": \"外貌描述（50-100字）：身高、体型、面容、着装风格\",\n  \"traits\": [\"特长1\", \"特长2\", \"特长3\"],\n  \"relationships_array\": [\n    {{\n      \"target_character_name\": \"已生成的角色名称\",\n      \"relationship_type\": \"关系类型\",\n      \"intimacy_level\": 75,\n      \"description\": \"关系描述\"\n    }}\n  ],\n  \"organization_memberships\": [\n    {{\n      \"organization_name\": \"已生成的组织名称\",\n      \"position\": \"职位\",\n      \"rank\": 5,\n      \"loyalty\": 80\n    }}\n  ]\n}}\n\n**组织对象**：\n{{\n  \"name\": \"组织名称\",\n  \"is_organization\": true,\n  \"role_type\": \"supporting\",\n  \"personality\": \"组织特性（100-200字）：运作方式、核心理念、行事风格\",\n  \"background\": \"组织背景（100-200字）：建立历史、发展历程、重要事件\",\n  \"appearance\": \"外在表现（50-100字）：总部位置、标志性建筑\",\n  \"organization_type\": \"组织类型\",\n  \"organization_purpose\": \"组织目的\",\n  \"organization_members\": [\"成员1\", \"成员2\"],\n  \"power_level\": 85,\n  \"location\": \"所在地或主要活动区域\",\n  \"motto\": \"组织格言、口号或宗旨\",\n  \"color\": \"代表颜色\",\n  \"traits\": []\n}}\n\n【关系类型参考】\n- 家族：父亲、母亲、兄弟、姐妹、子女、配偶、恋人\n- 社交：师父、徒弟、朋友、同学、同事、邻居、知己\n- 职业：上司、下属、合作伙伴\n- 敌对：敌人、仇人、竞争对手、宿敌\n\n【数值范围】\n- intimacy_level：-100到100（负值表示敌对）\n- loyalty：0到100\n- rank：0到10（职位等级）\n- power_level：70到95（组织影响力）\n</output>\n\n<constraints>\n【必须遵守】\n✅ 数量精确：数组必须包含{count}个对象\n✅ 符合世界观：角色设定与世界观一致\n✅ 有深度：性格和背景要立体\n✅ 关系网络：角色间形成合理关系\n✅ 组织合理：组织是推动剧情的关键力量\n\n【关系约束】\n✅ relationships_array只能引用本批次已出现的角色\n✅ organization_memberships只能引用本批次的组织\n✅ 第一个角色的relationships_array必须为空[]\n✅ 禁止幻觉：不引用不存在的角色或组织\n\n【格式约束】\n✅ 纯JSON数组输出，无markdown标记\n✅ 内容描述中严禁使用特殊符号（引号、方括号、书名号等）\n✅ 专有名词直接书写，不使用符号包裹\n\n【禁止事项】\n❌ 生成数量不符（多于或少于{count}个）\n❌ 引用不存在的角色或组织\n❌ 生成低影响力的无关紧要组织\n❌ 使用markdown或代码块标记\n❌ 在描述中使用特殊符号\n</constraints>",
      "description": "批量生成多个角色和组织，建立角色关系网络",
      "category": "角色生成",
      "parameters": "[\"count\", \"time_period\", \"location\", \"atmosphere\", \"rules\", \"theme\", \"genre\", \"requirements\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "9d115aee57b75393"
    },
    {
      "template_key": "SINGLE_CHARACTER_GENERATION",
      "template_name": "单个角色生成",
      "template_content": "<system>\n你是专业的角色设定师，擅长创建立体饱满的小说角色。\n</system>\n\n<task>\n【设计任务】\n根据用户需求和项目上下文，创建一个完整的角色设定。\n</task>\n\n<context priority=\"P0\">\n【项目上下文】\n{project_context}\n\n【用户需求】\n{user_input}\n</context>\n\n<output priority=\"P0\">\n【输出格式】\n生成完整的角色卡片JSON对象：\n\n{{\n  \"name\": \"角色姓名（如用户未提供则生成符合世界观的名字）\",\n  \"age\": \"年龄（具体数字或年龄段）\",\n  \"gender\": \"男/女/其他\",\n  \"appearance\": \"外貌描述（100-150字）：身高体型、面容特征、着装风格\",\n  \"personality\": \"性格特点（150-200字）：核心性格特质、优缺点、特殊习惯\",\n  \"background\": \"背景故事（200-300字）：家庭背景、成长经历、重要转折、与主题关联\",\n  \"traits\": [\"特长1\", \"特长2\", \"特长3\"],\n  \"relationships_text\": \"人际关系的自然语言描述\",\n  \"relationships\": [\n    {{\n      \"target_character_name\": \"已存在的角色名称\",\n      \"relationship_type\": \"关系类型\",\n      \"intimacy_level\": 75,\n      \"description\": \"关系的详细描述\",\n      \"started_at\": \"关系开始的故事时间点（可选）\"\n    }}\n  ],\n  \"organization_memberships\": [\n    {{\n      \"organization_name\": \"已存在的组织名称\",\n      \"position\": \"职位名称\",\n      \"rank\": 8,\n      \"loyalty\": 80,\n      \"joined_at\": \"加入时间（可选）\",\n      \"status\": \"active\"\n    }}\n  ],\n  \"career_info\": {{\n    \"main_career_name\": \"从可用主职业列表中选择的职业名称\",\n    \"main_career_stage\": 5,\n    \"sub_careers\": [\n      {{\n        \"career_name\": \"从可用副职业列表中选择的职业名称\",\n        \"stage\": 3\n      }}\n    ]\n  }}\n}}\n\n【职业信息说明】\n如果项目上下文包含职业列表：\n- 主职业：从\"可用主职业\"列表中选择最符合角色的职业\n- 主职业阶段：根据角色实力设定合理阶段（1到max_stage）\n- 副职业：可选择0-2个副职业\n- ⚠️ 填写职业名称而非ID，系统会自动匹配\n- 职业选择必须与角色背景、能力和定位高度契合\n\n【关系类型参考】\n- 家族：父亲、母亲、兄弟、姐妹、子女、配偶、恋人\n- 社交：师父、徒弟、朋友、同学、同事、邻居、知己\n- 职业：上司、下属、合作伙伴\n- 敌对：敌人、仇人、竞争对手、宿敌\n\n【数值范围】\n- intimacy_level：-100到100（负值表示敌对）\n- loyalty：0到100\n- rank：0到10\n</output>\n\n<constraints>\n【必须遵守】\n✅ 符合世界观：角色设定与项目世界观一致\n✅ 主题关联：背景故事与项目主题关联\n✅ 立体饱满：性格复杂有矛盾性，不脸谱化\n✅ 为故事服务：设定要推动剧情发展\n✅ 职业匹配：职业选择与角色高度契合\n\n【角色定位要求】\n✅ 主角：有成长空间和目标动机\n✅ 反派：有合理动机，不脸谱化\n✅ 配角：有独特性，不是工具人\n\n【关系约束】\n✅ relationships只引用已存在的角色\n✅ organization_memberships只引用已存在的组织\n✅ 无关系或组织时对应数组为空[]\n\n【格式约束】\n✅ 纯JSON对象输出，无markdown标记\n✅ 内容描述中严禁使用特殊符号\n✅ 专有名词直接书写\n\n【禁止事项】\n❌ 输出markdown或代码块标记\n❌ 在描述中使用特殊符号（引号、方括号等）\n❌ 引用不存在的角色或组织\n❌ 脸谱化的角色设定\n</constraints>",
      "description": "生成单个角色的详细设定",
      "category": "角色生成",
      "parameters": "[\"project_context\", \"user_input\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "4d3a2b3868daebc8"
    },
    {
      "template_key": "SINGLE_ORGANIZATION_GENERATION",
      "template_name": "组织生成",
      "template_content": "<system>\n你是专业的组织设定师，擅长创建完整的组织/势力设定。\n</system>\n\n<task>\n【设计任务】\n根据用户需求和项目上下文，创建一个完整的组织/势力设定。\n</task>\n\n<context priority=\"P0\">\n【项目上下文】\n{project_context}\n\n【用户需求】\n{user_input}\n</context>\n\n<output priority=\"P0\">\n【输出格式】\n生成完整的组织设定JSON对象：\n\n{{\n  \"name\": \"组织名称（如用户未提供则生成符合世界观的名称）\",\n  \"is_organization\": true,\n  \"organization_type\": \"组织类型（帮派/公司/门派/学院/政府机构/宗教组织等）\",\n  \"personality\": \"组织特性（150-200字）：核心理念、行事风格、文化价值观、运作方式\",\n  \"background\": \"组织背景（200-300字）：建立历史、发展历程、重要事件、当前地位\",\n  \"appearance\": \"外在表现（100-150字）：总部位置、标志性建筑、组织标志、制服等\",\n  \"organization_purpose\": \"组织目的和宗旨：明确目标、长期愿景、行动准则\",\n  \"power_level\": 75,\n  \"location\": \"所在地点：主要活动区域、势力范围\",\n  \"motto\": \"组织格言或口号\",\n  \"traits\": [\"特征1\", \"特征2\", \"特征3\"],\n  \"color\": \"组织代表颜色（如：深红色、金色、黑色等）\",\n  \"organization_members\": [\"重要成员1\", \"重要成员2\", \"重要成员3\"]\n}}\n\n【字段说明】\n- power_level：0-100的整数，表示在世界中的影响力\n- organization_members：组织内重要成员名字列表（可关联已有角色）\n- 成立时间：在background中描述\n</output>\n\n<constraints>\n【必须遵守】\n✅ 符合世界观：组织设定与项目世界观一致\n✅ 主题关联：背景与项目主题关联\n✅ 推动剧情：组织能推动故事发展\n✅ 有层级结构：内部有明确的层级和结构\n✅ 势力互动：与其他势力有互动关系\n\n【组织定位要求】\n✅ 有存在必要性：不是可有可无的背景板\n✅ 目标合理：不过于理想化或脸谱化\n✅ 具体细节：描述详细具体，避免空泛\n\n【格式约束】\n✅ 纯JSON对象输出，无markdown标记\n✅ 内容描述中严禁使用特殊符号\n✅ 专有名词直接书写\n\n【禁止事项】\n❌ 输出markdown或代码块标记\n❌ 在描述中使用特殊符号（引号、方括号等）\n❌ 过于理想化或脸谱化的设定\n❌ 空泛的描述\n</constraints>",
      "description": "生成组织/势力的详细设定",
      "category": "角色生成",
      "parameters": "[\"project_context\", \"user_input\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "a49d540e2ecdd07e"
    },
    {
      "template_key": "OUTLINE_CREATE",
      "template_name": "大纲生成",
      "template_content": "<system>\n你是经验丰富的小说作家和编剧，擅长为{genre}类型的小说设计精彩开篇。\n</system>\n\n<task>\n【创作任务】\n为小说《{title}》生成开篇{chapter_count}章的大纲。\n\n【重要说明】\n这是项目初始化的开头部分，不是完整大纲：\n- 完成开局设定和世界观展示\n- 引入主要角色，建立初始关系\n- 埋下核心矛盾和悬念钩子\n- 为后续剧情发展打下基础\n- 不需要完整闭环，为续写留空间\n</task>\n\n<project priority=\"P0\">\n【项目信息】\n书名：{title}\n主题：{theme}\n类型：{genre}\n开篇章节数：{chapter_count}\n叙事视角：{narrative_perspective}\n</project>\n\n<worldview priority=\"P1\">\n【世界观】\n时间背景：{time_period}\n地理位置：{location}\n氛围基调：{atmosphere}\n世界规则：{rules}\n</worldview>\n\n<characters priority=\"P1\">\n【角色信息】\n{characters_info}\n</characters>\n\n<mcp_context priority=\"P2\">\n{mcp_references}\n</mcp_context>\n\n<requirements priority=\"P1\">\n【其他要求】\n{requirements}\n</requirements>\n\n<output priority=\"P0\">\n【输出格式】\n返回包含{chapter_count}个章节对象的JSON数组：\n\n[\n  {{\n   \"chapter_number\": 1,\n   \"title\": \"章节标题\",\n   \"summary\": \"章节概要（500-1000字）：主要情节、角色互动、关键事件、冲突与转折\",\n   \"scenes\": [\"场景1描述\", \"场景2描述\", \"场景3描述\"],\n   \"characters\": [\n     {{\"name\": \"角色名1\", \"type\": \"character\"}},\n     {{\"name\": \"组织/势力名1\", \"type\": \"organization\"}}\n   ],\n   \"key_points\": [\"情节要点1\", \"情节要点2\"],\n   \"emotion\": \"本章情感基调\",\n   \"goal\": \"本章叙事目标\"\n }},\n {{\n   \"chapter_number\": 2,\n   \"title\": \"章节标题\",\n   \"summary\": \"章节概要...\",\n   \"scenes\": [\"场景1\", \"场景2\"],\n   \"characters\": [\n     {{\"name\": \"角色名2\", \"type\": \"character\"}},\n     {{\"name\": \"组织名2\", \"type\": \"organization\"}}\n   ],\n   \"key_points\": [\"要点1\", \"要点2\"],\n   \"emotion\": \"情感基调\",\n   \"goal\": \"叙事目标\"\n }}\n]\n\n【characters字段说明】\n- type为\"character\"表示个人角色，type为\"organization\"表示组织/势力/门派/帮派等\n- 必须区分角色和组织，不要把组织当作角色\n\n【格式规范】\n- 纯JSON数组输出，无markdown标记\n- 内容描述中严禁使用特殊符号\n- 专有名词直接书写\n- 字段结构与已有章节完全一致\n</output>\n\n<constraints>\n【开篇大纲要求】\n✅ 开局设定：前几章完成世界观呈现、主角登场、初始状态\n✅ 矛盾引入：引出核心冲突，但不急于展开\n✅ 角色亮相：主要角色依次登场，展示性格和关系\n✅ 节奏控制：开篇不宜过快，给读者适应时间\n✅ 悬念设置：埋下伏笔和钩子，为续写预留空间\n✅ 视角统一：采用{narrative_perspective}视角\n✅ 留白艺术：结尾不收束过紧，留发展空间\n\n【必须遵守】\n✅ 数量精确：数组包含{chapter_count}个章节对象\n✅ 符合类型：情节符合{genre}类型特征\n✅ 主题贴合：体现主题\"{theme}\"\n✅ 开篇定位：是开局而非完整故事\n✅ 描述详细：每个summary 500-1000字\n\n【禁止事项】\n❌ 输出markdown或代码块标记\n❌ 在描述中使用特殊符号\n❌ 试图在开篇完结故事\n❌ 节奏过快，信息过载\n</constraints>",
      "description": "根据项目信息生成完整的章节大纲",
      "category": "大纲生成",
      "parameters": "[\"title\", \"theme\", \"genre\", \"chapter_count\", \"narrative_perspective\", \"target_words\", \"time_period\", \"location\", \"atmosphere\", \"rules\", \"characters_info\", \"requirements\", \"mcp_references\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "19d605d4792c7850"
    },
    {
      "template_key": "OUTLINE_CONTINUE",
      "template_name": "大纲续写",
      "template_content": "<system>\n你是经验丰富的小说作家和编剧，擅长续写{genre}类型的小说大纲。\n</system>\n\n<task>\n【续写任务】\n基于已有{current_chapter_count}章内容，续写第{start_chapter}章到第{end_chapter}章的大纲（共{chapter_count}章）。\n\n【当前情节阶段】\n{plot_stage_instruction}\n\n【故事发展方向】\n{story_direction}\n</task>\n\n<project priority=\"P0\">\n【项目信息】\n书名：{title}\n主题：{theme}\n类型：{genre}\n叙事视角：{narrative_perspective}\n</project>\n\n<worldview priority=\"P1\">\n【世界观】\n时间背景：{time_period}\n地理位置：{location}\n氛围基调：{atmosphere}\n世界规则：{rules}\n</worldview>\n\n<previous_context priority=\"P0\">\n{recent_outlines}\n</previous_context>\n\n<characters priority=\"P0\">\n【所有角色信息】\n{characters_info}\n</characters>\n\n<user_input priority=\"P0\">\n【用户输入】\n续写章节数：{chapter_count}章\n情节阶段：{plot_stage_instruction}\n故事方向：{story_direction}\n其他要求：{requirements}\n</user_input>\n\n<mcp_context priority=\"P2\">\n{mcp_references}\n</mcp_context>\n\n<output priority=\"P0\">\n【输出格式】\n返回第{start_chapter}到第{end_chapter}章的JSON数组（共{chapter_count}个对象）：\n\n[\n  {{\n   \"chapter_number\": {start_chapter},\n   \"title\": \"章节标题\",\n   \"summary\": \"章节概要（500-1000字）：主要情节、角色互动、关键事件、冲突与转折\",\n   \"scenes\": [\"场景1描述\", \"场景2描述\", \"场景3描述\"],\n   \"characters\": [\n     {{\"name\": \"角色名1\", \"type\": \"character\"}},\n     {{\"name\": \"组织/势力名1\", \"type\": \"organization\"}}\n   ],\n   \"key_points\": [\"情节要点1\", \"情节要点2\"],\n   \"emotion\": \"本章情感基调\",\n   \"goal\": \"本章叙事目标\"\n }},\n {{\n   \"chapter_number\": {start_chapter} + 1,\n   \"title\": \"章节标题\",\n   \"summary\": \"章节概要...\",\n   \"scenes\": [\"场景1\", \"场景2\"],\n   \"characters\": [\n     {{\"name\": \"角色名2\", \"type\": \"character\"}},\n     {{\"name\": \"组织名2\", \"type\": \"organization\"}}\n   ],\n   \"key_points\": [\"要点1\", \"要点2\"],\n   \"emotion\": \"情感基调\",\n   \"goal\": \"叙事目标\"\n }}\n]\n\n【characters字段说明】\n- type为\"character\"表示个人角色，type为\"organization\"表示组织/势力/门派/帮派等\n- 必须区分角色和组织，不要把组织当作角色\n\n【格式规范】\n- 纯JSON数组输出，无markdown标记\n- 内容描述中严禁使用特殊符号\n- 专有名词直接书写\n- 字段结构与已有章节完全一致\n</output>\n\n<constraints>\n【续写要求】\n✅ 剧情连贯：与前文自然衔接，保持连贯性\n✅ 角色发展：遵循角色成长轨迹，充分利用角色信息\n✅ 情节阶段：遵循{plot_stage_instruction}的要求\n✅ 风格一致：保持与已有章节相同风格和详细程度\n✅ 大纲详细：充分解析最近10章大纲的structure字段信息\n\n【必须遵守】\n✅ 数量精确：数组包含{chapter_count}个章节\n✅ 编号正确：从第{start_chapter}章开始\n✅ 描述详细：每个summary 500-1000字\n✅ 承上启下：自然衔接前文\n\n【禁止事项】\n❌ 输出markdown或代码块标记\n❌ 在描述中使用特殊符号\n❌ 与前文矛盾或脱节\n❌ 忽略已有角色发展\n❌ 忽略最近大纲中的情节线索\n</constraints>",
      "description": "基于已有章节续写大纲",
      "category": "大纲生成",
      "parameters": "[\"title\", \"theme\", \"genre\", \"narrative_perspective\", \"chapter_count\", \"time_period\", \"location\", \"atmosphere\", \"rules\", \"characters_info\", \"current_chapter_count\", \"all_chapters_brief\", \"recent_plot\", \"memory_context\", \"mcp_references\", \"plot_stage_instruction\", \"start_chapter\", \"end_chapter\", \"story_direction\", \"requirements\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "1537436bd15edab4"
    },
    {
      "template_key": "CHAPTER_GENERATION_ONE_TO_MANY",
      "template_name": "章节创作-1-N模式（第1章）",
      "template_content": "<system>\n你是《{project_title}》的作者，一位专注于{genre}类型的网络小说家。\n</system>\n\n<task>\n【创作任务】\n撰写第{chapter_number}章《{chapter_title}》的完整正文。\n\n【基本要求】\n- 目标字数：{target_word_count}字（允许±200字浮动）\n- 叙事视角：{narrative_perspective}\n</task>\n\n<outline priority=\"P0\">\n【本章大纲 - 必须遵循】\n{chapter_outline}\n</outline>\n\n<characters priority=\"P1\">\n【本章角色 - 请严格遵循角色设定】\n{characters_info}\n\n⚠️ 角色互动须知：\n- 角色之间的对话和行为必须符合其关系设定（如师徒、敌对等）\n- 涉及组织的情节须体现角色在组织中的身份和职位\n- 角色的能力表现须符合其职业和阶段设定\n</characters>\n\n<careers priority=\"P2\">\n【本章职业】\n{chapter_careers}\n</careers>\n\n<foreshadow_reminders priority=\"P2\">\n【🎯 伏笔提醒】\n{foreshadow_reminders}\n</foreshadow_reminders>\n\n<memory priority=\"P2\">\n【相关记忆】\n{relevant_memories}\n</memory>\n\n<constraints>\n【必须遵守】\n✅ 严格按照大纲推进情节\n✅ 保持角色性格、说话方式一致\n✅ 角色互动须符合关系设定（师徒、朋友、敌对等）\n✅ 组织相关情节须体现成员身份和职位层级\n✅ 字数控制在目标范围内\n✅ 如有伏笔提醒，请在本章中适当埋入或回收相应伏笔\n\n【禁止事项】\n❌ 输出章节标题、序号等元信息\n❌ 使用\"总之\"、\"综上所述\"等AI常见总结语\n❌ 在结尾处使用开放式反问\n❌ 添加作者注释或创作说明\n❌ 角色行为超出其职业阶段的能力范围\n</constraints>\n\n<output>\n【输出规范】\n直接输出小说正文内容，从故事场景或动作开始。\n无需任何前言、后记或解释性文字。\n\n现在开始创作：\n</output>",
      "description": "1-N模式：根据大纲创作章节内容（用于第1章，无前置章节）",
      "category": "章节创作",
      "parameters": "[\"project_title\", \"genre\", \"chapter_number\", \"chapter_title\", \"chapter_outline\", \"target_word_count\", \"narrative_perspective\", \"characters_info\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "317fce5e1be84609"
    },
    {
      "template_key": "CHAPTER_GENERATION_ONE_TO_MANY_NEXT",
      "template_name": "章节创作-1-N模式（第2章及以后）",
      "template_content": "<system>\n你是《{project_title}》的作者，一位专注于{genre}类型的网络小说家。\n</system>\n\n<task>\n【创作任务】\n撰写第{chapter_number}章《{chapter_title}》的完整正文。\n\n【基本要求】\n- 目标字数：{target_word_count}字（允许±200字浮动）\n- 叙事视角：{narrative_perspective}\n</task>\n\n<outline priority=\"P0\">\n【本章大纲 - 必须遵循】\n{chapter_outline}\n</outline>\n\n<recent_context priority=\"P1\">\n【最近章节规划 - 故事脉络参考】\n{recent_chapters_context}\n</recent_context>\n\n<continuation priority=\"P0\">\n【衔接锚点 - 必须承接】\n上一章结尾：\n「{continuation_point}」\n\n【🔴 上一章已完成剧情（禁止重复！）】\n{previous_chapter_summary}\n\n⚠️ 严重警告：\n1. 上述\"已完成剧情\"和\"衔接锚点\"是**已经写过的**内容\n2. 本章必须推进到**新的情节点**，绝对不能重新叙述已经发生的事件\n3. 如果锚点是对话结束，请描写对话后的动作或场景转换，不要重复对话\n4. 如果锚点是场景描写，请直接开始人物行动，不要重复描写环境\n</continuation>\n\n<characters priority=\"P1\">\n【本章角色 - 请严格遵循角色设定】\n{characters_info}\n\n⚠️ 角色互动须知：\n- 角色之间的对话和行为必须符合其关系设定（如师徒、敌对等）\n- 涉及组织的情节须体现角色在组织中的身份和职位\n- 角色的能力表现须符合其职业和阶段设定\n</characters>\n\n<careers priority=\"P2\">\n【本章职业】\n{chapter_careers}\n</careers>\n\n<foreshadow_reminders priority=\"P1\">\n【🎯 伏笔提醒 - 需关注】\n{foreshadow_reminders}\n</foreshadow_reminders>\n\n<memory priority=\"P2\">\n【相关记忆 - 参考】\n{relevant_memories}\n</memory>\n\n<constraints>\n【必须遵守】\n✅ 严格按照大纲推进情节\n✅ 自然承接上一章结尾，不重复已发生事件\n✅ 保持角色性格、说话方式一致\n✅ 角色互动须符合关系设定（师徒、朋友、敌对等）\n✅ 组织相关情节须体现成员身份和职位层级\n✅ 字数控制在目标范围内\n✅ 如有伏笔提醒，请在本章中适当埋入或回收相应伏笔\n\n【🔴 反重复特别指令】\n✅ 检查本章开篇是否与\"衔接锚点\"内容重复\n✅ 检查本章情节是否与\"上一章已完成剧情\"重复\n✅ 确保本章推进到了大纲中规划的新事件\n\n【禁止事项】\n❌ 输出章节标题、序号等元信息\n❌ 使用\"总之\"、\"综上所述\"等AI常见总结语\n❌ 在结尾处使用开放式反问\n❌ 添加作者注释或创作说明\n❌ 重复叙述上一章已发生的事件（包括环境描写、心理活动）\n❌ 在开篇使用\"接上回\"、\"书接上文\"等套话\n❌ 角色行为超出其职业阶段的能力范围\n</constraints>\n\n<output>\n【输出规范】\n直接输出小说正文内容，从故事场景或动作开始。\n无需任何前言、后记或解释性文字。\n\n现在开始创作：\n</output>",
      "description": "1-N模式：基于前置章节内容创作新章节（用于第2章及以后）",
      "category": "章节创作",
      "parameters": "[\"project_title\", \"genre\", \"chapter_number\", \"chapter_title\", \"chapter_outline\", \"target_word_count\", \"narrative_perspective\", \"characters_info\", \"continuation_point\", \"foreshadow_reminders\", \"relevant_memories\", \"story_skeleton\", \"previous_chapter_summary\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "de5a8225b8a13591"
    },
    {
      "template_key": "CHAPTER_GENERATION_ONE_TO_ONE",
      "template_name": "章节创作-1-1模式（第1章）",
      "template_content": "<system>\n你是《{project_title}》的作者，一位专注于{genre}类型的网络小说家。\n</system>\n\n<task priority=\"P0\">\n【创作任务】\n撰写第{chapter_number}章《{chapter_title}》的完整正文。\n\n【基本要求】\n- 目标字数：{target_word_count}字（允许±200字浮动）\n- 叙事视角：{narrative_perspective}\n</task>\n\n<outline priority=\"P0\">\n【本章大纲】\n{chapter_outline}\n</outline>\n\n<characters priority=\"P1\">\n【本章角色】\n{characters_info}\n</characters>\n\n<careers priority=\"P2\">\n【本章职业】\n{chapter_careers}\n</careers>\n\n<foreshadow_reminders priority=\"P2\">\n【🎯 伏笔提醒】\n{foreshadow_reminders}\n</foreshadow_reminders>\n\n<memory priority=\"P2\">\n【相关记忆】\n{relevant_memories}\n</memory>\n\n<constraints>\n【必须遵守】\n✅ 严格按照大纲推进情节\n✅ 保持角色性格、说话方式一致\n✅ 字数需要严格控制在目标字数内\n✅ 如有伏笔提醒，请在本章中适当埋入或回收相应伏笔\n\n【禁止事项】\n❌ 输出章节标题、序号等元信息\n❌ 使用\"总之\"、\"综上所述\"等AI常见总结语\n❌ 添加作者注释或创作说明\n❌ 生成字数禁止超过目标字数\n</constraints>\n\n<output>\n【输出规范】\n直接输出小说正文内容，从故事场景或动作开始。\n无需任何前言、后记或解释性文字。\n\n现在开始创作：\n</output>",
      "description": "1-1模式：章节创作（用于第1章，无前置章节）",
      "category": "章节创作",
      "parameters": "[\"project_title\", \"genre\", \"chapter_number\", \"chapter_title\", \"chapter_outline\", \"target_word_count\", \"narrative_perspective\", \"characters_info\", \"chapter_careers\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "97903b85d0a02fa3"
    },
    {
      "template_key": "CHAPTER_GENERATION_ONE_TO_ONE_NEXT",
      "template_name": "章节创作-1-1模式（第2章及以后）",
      "template_content": "<system>\n你是《{project_title}》的作者，一位专注于{genre}类型的网络小说家。\n</system>\n\n<task priority=\"P0\">\n【创作任务】\n撰写第{chapter_number}章《{chapter_title}》的完整正文。\n\n【基本要求】\n- 目标字数：{target_word_count}字（允许±200字浮动）\n- 叙事视角：{narrative_perspective}\n</task>\n\n<outline priority=\"P0\">\n【本章大纲】\n{chapter_outline}\n</outline>\n\n<previous_chapter_summary priority=\"P1\">\n【上一章剧情概要】\n{previous_chapter_summary}\n</previous_chapter_summary>\n\n<previous_chapter priority=\"P1\">\n【上一章末尾500字内容】\n{previous_chapter_content}\n</previous_chapter>\n\n<characters priority=\"P1\">\n【本章角色】\n{characters_info}\n</characters>\n\n<careers priority=\"P2\">\n【本章职业】\n{chapter_careers}\n</careers>\n\n<foreshadow_reminders priority=\"P2\">\n【🎯 伏笔提醒】\n{foreshadow_reminders}\n</foreshadow_reminders>\n\n<memory priority=\"P2\">\n【相关记忆】\n{relevant_memories}\n</memory>\n\n<constraints>\n【必须遵守】\n✅ 严格按照大纲推进情节\n✅ 自然承接上一章末尾内容，保持连贯性\n✅ 保持角色性格、说话方式一致\n✅ 字数需要严格控制在目标字数内\n✅ 如有伏笔提醒，请在本章中适当埋入或回收相应伏笔\n\n【禁止事项】\n❌ 输出章节标题、序号等元信息\n❌ 使用\"总之\"、\"综上所述\"等AI常见总结语\n❌ 在结尾处使用开放式反问\n❌ 添加作者注释或创作说明\n❌ 重复上一章已发生的事件\n❌ 生成字数禁止超过目标字数\n</constraints>\n\n<output>\n【输出规范】\n直接输出小说正文内容，从故事场景或动作开始。\n无需任何前言、后记或解释性文字。\n\n现在开始创作：\n</output>",
      "description": "1-1模式：基于上一章内容创作新章节（用于第2章及以后）",
      "category": "章节创作",
      "parameters": "[\"project_title\", \"genre\", \"chapter_number\", \"chapter_title\", \"chapter_outline\", \"target_word_count\", \"narrative_perspective\", \"previous_chapter_content\", \"characters_info\", \"chapter_careers\", \"foreshadow_reminders\", \"relevant_memories\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "42963dba5bc8aaa3"
    },
    {
      "template_key": "CHAPTER_REGENERATION_SYSTEM",
      "template_name": "章节重写系统提示",
      "template_content": "<system>\n你是经验丰富的专业小说编辑和作家，擅长根据反馈意见重新创作章节。\n你的任务是根据修改指令，对原始章节进行深度改写和优化。\n</system>\n\n<task>\n【重写任务】\n1. 仔细理解原始章节的内容、情节走向和叙事意图\n2. 认真分析所有的修改要求，包括AI分析建议和用户自定义指令\n3. 针对每一条修改建议，在新版本中进行具体改进\n4. 在保持故事连贯性和角色一致性的前提下，创作改进后的新版本\n5. 确保新版本在艺术性、可读性和叙事质量上都有明显提升\n</task>\n\n<guidelines>\n【改写原则】\n- **问题导向**：针对修改指令中指出的每个问题进行改进\n- **保持精华**：保留原章节中优秀的描写、对话和情节设计\n- **深化细节**：增强场景描写、情感渲染和人物刻画\n- **节奏优化**：调整叙事节奏，避免拖沓或过快\n- **风格一致**：如果提供了写作风格要求，必须严格遵循\n\n【重点关注】\n- 如果修改指令提到\"节奏\"问题，重点调整叙事速度和场景切换\n- 如果修改指令提到\"情感\"问题，重点深化人物内心戏和情感表达\n- 如果修改指令提到\"描写\"问题，重点丰富环境和动作细节\n- 如果修改指令提到\"对话\"问题，重点让对话更自然、更有个性\n- 如果修改指令提到\"冲突\"问题，重点强化矛盾和戏剧张力\n</guidelines>\n\n<output>\n【输出规范】\n直接输出重写后的章节正文内容。\n- 不要包含章节标题、序号或其他元信息\n- 不要输出任何解释、注释或创作说明\n- 从故事内容直接开始，保持叙事的连贯性\n</output>\n",
      "description": "用于章节重写的系统提示词",
      "category": "章节重写",
      "parameters": "[\"chapter_number\", \"title\", \"word_count\", \"content\", \"modification_instructions\", \"project_context\", \"style_content\", \"target_word_count\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "72bdc13986438b71"
    },
    {
      "template_key": "PARTIAL_REGENERATE",
      "template_name": "局部重写",
      "template_content": "<system>\n你是一位专业的小说改写助手，擅长根据用户的修改要求精准改写指定段落，同时确保与前后文无缝衔接。\n</system>\n\n<task>\n【改写任务】\n根据用户的修改要求，重写下面选中的文本段落。\n\n【重要要求】\n1. 只输出重写后的内容，不要包含任何解释、前缀或后缀\n2. 保持与前后文的自然衔接和语气连贯\n3. 严格遵循用户的修改要求\n4. 保持整体叙事风格的一致性\n</task>\n\n<context priority=\"P0\">\n【前文参考】（用于衔接，勿重复）\n{context_before}\n\n【需要重写的原文】（共{original_word_count}字）\n{selected_text}\n\n【后文参考】（用于衔接，勿重复）\n{context_after}\n</context>\n\n<user_requirements priority=\"P0\">\n【用户修改要求】\n{user_instructions}\n\n【字数要求】\n{length_requirement}\n</user_requirements>\n\n<style priority=\"P1\">\n【写作风格】\n{style_content}\n</style>\n\n<output>\n【输出规范】\n直接输出重写后的内容，从故事内容开始写。\n- 不要输出任何解释或说明文字\n- 不要输出\"重写后：\"等前缀\n- 不要输出引号包裹内容\n- 确保输出内容可以直接替换原文\n\n请直接输出重写后的内容：\n</output>\n\n<constraints>\n【必须遵守】\n✅ 前后衔接：输出内容必须与前文自然衔接，与后文平滑过渡\n✅ 风格一致：保持与原文相同的叙事风格、语气和人称\n✅ 要求优先：严格执行用户的修改要求\n✅ 字数控制：遵循字数要求\n\n【禁止事项】\n❌ 重复前文内容\n❌ 重复后文内容\n❌ 添加任何元信息或说明\n❌ 改变叙事人称或视角\n❌ 偏离用户的修改要求\n</constraints>",
      "description": "根据用户修改要求重写选中的段落内容",
      "category": "章节重写",
      "parameters": "[\"context_before\", \"original_word_count\", \"selected_text\", \"context_after\", \"user_instructions\", \"length_requirement\", \"style_content\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "bd39881bb46f5fa8"
    },
    {
      "template_key": "PLOT_ANALYSIS",
      "template_name": "情节分析",
      "template_content": "<system>\n你是专业的小说编辑和剧情分析师，擅长深度剖析章节内容。\n</system>\n\n<task>\n【分析任务】\n全面分析第{chapter_number}章《{title}》的剧情要素、钩子、伏笔、冲突和角色发展。\n\n【🔴 伏笔追踪任务（重要）】\n系统已提供【已埋入伏笔列表】，当你识别到章节中有回收伏笔时：\n1. 必须从列表中找出对应的伏笔ID\n2. 在 foreshadows 数组中使用 reference_foreshadow_id 字段关联\n3. 如果无法确定是哪个伏笔，reference_foreshadow_id 填 null\n</task>\n\n<chapter priority=\"P0\">\n【章节信息】\n章节：第{chapter_number}章\n标题：{title}\n字数：{word_count}字\n\n【章节内容】\n{content}\n</chapter>\n\n<existing_foreshadows priority=\"P1\">\n【已埋入伏笔列表 - 用于回收匹配】\n以下是本项目中已埋入但尚未回收的伏笔，分析时如发现章节内容回收了某个伏笔，请使用对应的ID：\n\n{existing_foreshadows}\n</existing_foreshadows>\n\n<characters priority=\"P1\">\n【项目角色信息 - 用于角色状态分析】\n以下是项目中已有的角色列表，分析 character_states 和 relationship_changes 时请使用这些角色的准确名称：\n\n{characters_info}\n</characters>\n\n<analysis_framework priority=\"P0\">\n【分析维度】\n\n**1. 剧情钩子 (Hooks)**\n识别吸引读者的关键元素：\n- 悬念钩子：未解之谜、疑问、谜团\n- 情感钩子：引发共鸣的情感点\n- 冲突钩子：矛盾对抗、紧张局势\n- 认知钩子：颠覆认知的信息\n\n每个钩子需要：\n- 类型分类\n- 具体内容描述\n- 强度评分(1-10)\n- 出现位置(开头/中段/结尾)\n- **关键词**：【必填】从原文逐字复制8-25字的文本片段，用于精确定位\n\n**2. 伏笔分析 (Foreshadowing) - 🔴 支持ID追踪**\n- 埋下的新伏笔：内容、预期作用、隐藏程度(1-10)\n- 回收的旧伏笔：【必须】从已埋入伏笔列表中匹配ID\n- 伏笔质量：巧妙性和合理性\n- **关键词**：【必填】从原文逐字复制8-25字\n\n每个伏笔需要：\n- **title**：简洁标题（10-20字，概括伏笔核心）\n  - ⚠️ 回收伏笔时，标题应与原伏笔标题保持一致，不要添加\"回收\"等后缀\n  - 例如：原伏笔标题是\"绿头发的视觉符号\"，回收时标题仍为\"绿头发的视觉符号\"，而非\"绿头发的视觉符号回收\"\n- **content**：详细描述伏笔内容和预期作用\n- **type**：planted（埋下）或 resolved（回收）\n- **strength**：强度1-10（对读者的吸引力）\n- **subtlety**：隐藏度1-10（越高越隐蔽）\n- **reference_chapter**：回收时引用的原埋入章节号，埋下时为null\n- **reference_foreshadow_id**：【回收时必填】被回收伏笔的ID（从已埋入伏笔列表中选择），埋下时为null\n  - 🔴 重要：回收伏笔时，必须从【已埋入伏笔列表】中找到对应的伏笔ID并填写\n  - 如果列表中有标注【ID: xxx】的伏笔，回收时必须使用该ID\n  - 如果无法确定是哪个伏笔，才填写null（但应尽量避免）\n- **keyword**：【必填】从原文逐字复制8-25字的定位文本\n- **category**：分类（identity=身世/mystery=悬念/item=物品/relationship=关系/event=事件/ability=能力/prophecy=预言）\n- **is_long_term**：是否长线伏笔（跨10章以上回收为true）\n- **related_characters**：涉及的角色名列表\n- **estimated_resolve_chapter**：【必填】预估回收章节号（埋下时必须预估，回收时为当前章节）\n\n**3. 冲突分析 (Conflict)**\n- 冲突类型：人与人/人与己/人与环境/人与社会\n- 冲突各方及立场\n- 冲突强度(1-10)\n- 解决进度(0-100%)\n\n**4. 情感曲线 (Emotional Arc)**\n- 主导情绪（最多10字）\n- 情感强度(1-10)\n- 情绪变化轨迹\n\n**5. 角色状态追踪 (Character Development)**\n对每个出场角色分析：\n- 心理状态变化(前→后)\n- 关系变化\n- 关键行动和决策\n- 成长或退步\n- **💀 存活状态（重要）**：\n  - survival_status: 角色当前存活状态\n  - 可选值：active(正常)/deceased(死亡)/missing(失踪)/retired(退场)\n  - 默认为null（表示无变化），仅当章节中角色明确死亡、失踪或永久退场时才填写\n  - 死亡/失踪需要有明确的剧情依据，不可臆测\n- ** 职业变化（可选）**：\n  - 仅当章节明确描述职业进展时填写\n  - main_career_stage_change: 整数(+1晋升/-1退步/0无变化)\n  - sub_career_changes: 副职业变化数组\n  - new_careers: 新获得职业\n  - career_breakthrough: 突破过程描述\n- **🏛️ 组织变化（可选）**：\n  - 仅当章节明确描述角色与组织关系变化时填写\n  - organization_changes: 组织变动数组\n  - 每项包含：organization_name(组织名)、change_type(加入joined/离开left/晋升promoted/降级demoted/开除expelled/叛变betrayed)、new_position(新职位，可选)、loyalty_change(忠诚度变化描述，可选)、description(变化描述)\n\n**5b. 组织状态追踪 (Organization Status) - 可选**\n仅当章节涉及组织势力变化时填写，分析出场组织的状态变化：\n- 组织名称\n- 势力等级变化(power_change: 整数，+N增强/-N削弱/0无变化)\n- 据点变化(new_location: 新据点，可选)\n- 宗旨/目标变化(new_purpose: 新目标，可选)\n- 组织状态描述(status_description: 当前状态概述)\n- 关键事件(key_event: 触发变化的事件)\n- **💀 组织存续状态（重要）**：\n  - is_destroyed: 组织是否被覆灭（true/false，默认false）\n  - 仅当章节明确描述组织被彻底消灭、瓦解、灭亡时设为true\n\n**6. 关键情节点 (Plot Points)**\n列出3-5个核心情节点：\n- 情节内容\n- 类型(revelation/conflict/resolution/transition)\n- 重要性(0.0-1.0)\n- 对故事的影响\n- **关键词**：【必填】从原文逐字复制8-25字\n\n**7. 场景与节奏**\n- 主要场景\n- 叙事节奏(快/中/慢)\n- 对话与描写比例\n\n**8. 质量评分（支持小数，严格区分度）**\n评分范围：1.0-10.0，支持一位小数（如 6.5、7.8）\n每个维度必须根据以下标准严格评分，避免所有内容都打中等分数：\n\n**节奏把控 (pacing)**：\n- 1.0-3.9（差）：节奏混乱，该快不快该慢不慢；场景切换生硬；大段无意义描写拖沓\n- 4.0-5.9（中下）：节奏基本可读但有明显问题；部分场景过于冗长或仓促\n- 6.0-7.9（中上）：节奏整体流畅，偶有小问题；张弛有度但不够精妙\n- 8.0-9.4（优秀）：节奏把控精准，高潮迭起；场景切换自然，详略得当\n- 9.5-10.0（完美）：节奏大师级，每个段落都恰到好处\n\n**吸引力 (engagement)**：\n- 1.0-3.9（差）：内容乏味，缺乏钩子；读者难以继续阅读\n- 4.0-5.9（中下）：有基本情节但缺乏亮点；钩子设置生硬或缺失\n- 6.0-7.9（中上）：有一定吸引力，钩子有效但不够巧妙\n- 8.0-9.4（优秀）：引人入胜，钩子设置精妙；让人欲罢不能\n- 9.5-10.0（完美）：极具吸引力，每个段落都有阅读动力\n\n**连贯性 (coherence)**：\n- 1.0-3.9（差）：逻辑混乱，前后矛盾；角色行为不合理\n- 4.0-5.9（中下）：基本连贯但有明显漏洞；部分情节衔接生硬\n- 6.0-7.9（中上）：整体连贯，偶有小瑕疵；角色行为基本合理\n- 8.0-9.4（优秀）：逻辑严密，衔接自然；角色行为高度一致\n- 9.5-10.0（完美）：无懈可击的连贯性\n\n**整体质量 (overall)**：\n- 计算公式：(pacing + engagement + coherence) / 3，保留一位小数\n- 可根据综合印象±0.5调整，必须与各项分数保持一致性\n\n**9. 改进建议（与分数关联）**\n建议数量必须与整体质量分数关联：\n- overall < 4.0：必须提供4-5条具体改进建议，指出严重问题\n- overall 4.0-5.9：必须提供3-4条改进建议，指出主要问题\n- overall 6.0-7.9：提供1-2条优化建议，指出可提升之处\n- overall ≥ 8.0：提供0-1条锦上添花的建议\n\n每条建议必须：\n- 指出具体问题位置或类型\n- 说明为什么是问题\n- 给出明确的改进方向\n</analysis_framework>\n\n<output priority=\"P0\">\n【输出格式】\n返回纯JSON对象（无markdown标记）：\n\n{{\n  \"hooks\": [\n    {{\n      \"type\": \"悬念\",\n      \"content\": \"具体描述\",\n      \"strength\": 8,\n      \"position\": \"中段\",\n      \"keyword\": \"从原文逐字复制的8-25字文本\"\n    }}\n  ],\n  \"foreshadows\": [\n    {{\n      \"title\": \"伏笔简洁标题\",\n      \"content\": \"伏笔详细内容和预期作用\",\n      \"type\": \"planted\",\n      \"strength\": 7,\n      \"subtlety\": 8,\n      \"reference_chapter\": null,\n      \"reference_foreshadow_id\": null,\n      \"keyword\": \"从原文逐字复制的8-25字文本\",\n      \"category\": \"mystery\",\n      \"is_long_term\": false,\n      \"related_characters\": [\"角色A\", \"角色B\"],\n      \"estimated_resolve_chapter\": 15\n    }},\n    {{\n      \"title\": \"回收的伏笔标题\",\n      \"content\": \"伏笔如何被回收的描述\",\n      \"type\": \"resolved\",\n      \"strength\": 8,\n      \"subtlety\": 6,\n      \"reference_chapter\": 5,\n      \"reference_foreshadow_id\": \"abc123-已埋入伏笔的ID\",\n      \"keyword\": \"从原文逐字复制的8-25字文本\",\n      \"category\": \"mystery\",\n      \"is_long_term\": false,\n      \"related_characters\": [\"角色A\"],\n      \"estimated_resolve_chapter\": 10\n    }}\n  ],\n  \"conflict\": {{\n    \"types\": [\"人与人\", \"人与己\"],\n    \"parties\": [\"主角-复仇\", \"反派-维护现状\"],\n    \"level\": 8,\n    \"description\": \"冲突描述\",\n    \"resolution_progress\": 0.3\n  }},\n  \"emotional_arc\": {{\n    \"primary_emotion\": \"紧张焦虑\",\n    \"intensity\": 8,\n    \"curve\": \"平静→紧张→高潮→释放\",\n    \"secondary_emotions\": [\"期待\", \"焦虑\"]\n  }},\n  \"character_states\": [\n    {{\n      \"character_name\": \"张三\",\n      \"survival_status\": null,\n      \"state_before\": \"犹豫\",\n      \"state_after\": \"坚定\",\n      \"psychological_change\": \"心理变化描述\",\n      \"key_event\": \"触发事件\",\n      \"relationship_changes\": {{\"李四\": \"关系改善\"}},\n      \"career_changes\": {{\n        \"main_career_stage_change\": 1,\n        \"sub_career_changes\": [{{\"career_name\": \"炼丹\", \"stage_change\": 1}}],\n        \"new_careers\": [],\n        \"career_breakthrough\": \"突破描述\"\n      }},\n      \"organization_changes\": [\n        {{\n          \"organization_name\": \"某门派\",\n          \"change_type\": \"promoted\",\n          \"new_position\": \"长老\",\n          \"loyalty_change\": \"忠诚度提升\",\n          \"description\": \"因立下大功被提拔为长老\"\n        }}\n      ]\n    }}\n  ],\n  \"plot_points\": [\n    {{\n      \"content\": \"情节点描述\",\n      \"type\": \"revelation\",\n      \"importance\": 0.9,\n      \"impact\": \"推动故事发展\",\n      \"keyword\": \"从原文逐字复制的8-25字文本\"\n    }}\n  ],\n  \"scenes\": [\n    {{\n      \"location\": \"地点\",\n      \"atmosphere\": \"氛围\",\n      \"duration\": \"时长估计\"\n    }}\n  ],\n  \"organization_states\": [\n    {{\n      \"organization_name\": \"某门派\",\n      \"power_change\": -10,\n      \"new_location\": null,\n      \"new_purpose\": null,\n      \"status_description\": \"因内乱势力受损，但核心力量未动摇\",\n      \"key_event\": \"长老叛变导致分支瓦解\",\n      \"is_destroyed\": false\n    }}\n  ],\n  \"pacing\": \"varied\",\n  \"dialogue_ratio\": 0.4,\n  \"description_ratio\": 0.3,\n  \"scores\": {{\n    \"pacing\": 6.5,\n    \"engagement\": 5.8,\n    \"coherence\": 7.2,\n    \"overall\": 6.5,\n    \"score_justification\": \"节奏整体流畅但中段略显拖沓；钩子设置有效但不够巧妙；逻辑连贯无明显漏洞\"\n  }},\n  \"plot_stage\": \"发展\",\n  \"suggestions\": [\n    \"【节奏问题】第三场景的心理描写过长（约500字），建议精简至200字以内，保留核心情感即可\",\n    \"【吸引力不足】章节中段缺乏有效钩子，建议在主角发现线索后增加一个小悬念\"\n  ]\n}}\n</output>\n\n<constraints>\n【必须遵守】\n✅ keyword字段必填：钩子、伏笔、情节点的keyword不能为空\n✅ 逐字复制：keyword必须从原文复制，长度8-25字\n✅ 精确定位：keyword能在原文中精确找到\n✅ 职业变化可选：仅当章节明确描述时填写\n✅ 组织变化可选：仅当章节明确描述角色与组织关系变动时填写（character_states中的organization_changes）\n✅ 组织状态可选：仅当章节明确描述组织势力/据点/目标变化时填写（organization_states顶级字段）\n✅ 存活状态谨慎：survival_status仅当章节有明确死亡/失踪/退场描写时填写，默认null\n✅ 组织覆灭谨慎：is_destroyed仅当组织被彻底消灭时设true，组织受损不算覆灭\n✅ 【伏笔ID追踪】回收伏笔时，必须从【已埋入伏笔列表】中查找匹配的ID填入 reference_foreshadow_id\n\n【评分约束 - 严格执行】\n✅ 严格按评分标准打分，支持小数（如6.5、7.2、8.3）\n✅ 不要默认给7.0-8.0分，差的内容必须给低分（1.0-5.0），好的内容才给高分（8.0-10.0）\n✅ score_justification必填：简要说明各项评分的依据\n✅ 建议数量必须与overall分数关联：\n   - overall≤4.0 → 4-5条建议\n   - overall 4.0-6.0 → 3-4条建议\n   - overall 6.0-8.0 → 1-2条建议\n   - overall≥8.0 → 0-1条建议\n✅ 每条建议必须标注问题类型（如【节奏问题】【描写不足】等）\n\n【禁止事项】\n❌ keyword使用概括或改写的文字\n❌ 输出markdown标记\n❌ 遗漏必填的keyword字段\n❌ 无根据地添加职业变化\n❌ 无根据地添加组织变化或组织状态变化\n❌ 无确切剧情依据地标记角色死亡或组织覆灭\n❌ 所有章节都打7-8分的\"安全分\"\n❌ 高分章节给大量建议，或低分章节不给建议\n</constraints>",
      "description": "深度分析章节的剧情、钩子、伏笔等",
      "category": "情节分析",
      "parameters": "[\"chapter_number\", \"title\", \"content\", \"word_count\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "8571cf278bdcf74b"
    },
    {
      "template_key": "OUTLINE_EXPAND_SINGLE",
      "template_name": "大纲单批次展开",
      "template_content": "<system>\n你是专业的小说情节架构师，擅长将大纲节点展开为详细章节规划。\n</system>\n\n<task>\n【展开任务】\n将第{outline_order_index}节大纲《{outline_title}》展开为{target_chapter_count}个章节的详细规划。\n\n【展开策略】\n{strategy_instruction}\n</task>\n\n<project priority=\"P1\">\n【项目信息】\n小说名称：{project_title}\n类型：{project_genre}\n主题：{project_theme}\n叙事视角：{project_narrative_perspective}\n\n【世界观背景】\n时间背景：{project_world_time_period}\n地理位置：{project_world_location}\n氛围基调：{project_world_atmosphere}\n</project>\n\n<characters priority=\"P1\">\n【角色信息】\n{characters_info}\n</characters>\n\n<outline_node priority=\"P0\">\n【当前大纲节点 - 展开对象】\n序号：第 {outline_order_index} 节\n标题：{outline_title}\n内容：{outline_content}\n</outline_node>\n\n<context priority=\"P2\">\n【上下文参考】\n{context_info}\n</context>\n\n<output priority=\"P0\">\n【输出格式】\n返回{target_chapter_count}个章节规划的JSON数组：\n\n[\n  {{\n    \"sub_index\": 1,\n    \"title\": \"章节标题（体现核心冲突或情感）\",\n    \"plot_summary\": \"剧情摘要（200-300字）：详细描述该章发生的事件，仅限当前大纲内容\",\n    \"key_events\": [\"关键事件1\", \"关键事件2\", \"关键事件3\"],\n    \"character_focus\": [\"角色A\", \"角色B\"],\n    \"emotional_tone\": \"情感基调（如：紧张、温馨、悲伤）\",\n    \"narrative_goal\": \"叙事目标（该章要达成的叙事效果）\",\n    \"conflict_type\": \"冲突类型（如：内心挣扎、人际冲突）\",\n    \"estimated_words\": 3000{scene_field}\n  }}\n]\n\n【格式规范】\n- 纯JSON数组输出，无其他文字\n- 内容描述中严禁使用特殊符号\n</output>\n\n<constraints>\n【⚠️ 内容边界约束 - 必须严格遵守】\n✅ 只能展开当前大纲节点的内容\n✅ 深化当前大纲，而非跨越到后续\n✅ 放慢叙事节奏，充分体验当前阶段\n\n❌ 绝对不能推进到后续大纲内容\n❌ 不要让剧情快速推进\n❌ 不要提前展开【后一节】的内容\n\n【展开原则】\n✅ 将单一事件拆解为多个细节丰富的章节\n✅ 深入挖掘情感、心理、环境、对话\n✅ 每章是当前大纲内容的不同侧面或阶段\n\n【🔴 相邻章节差异化约束（防止重复）】\n✅ 每章有独特的开场方式（不同场景、时间点、角色状态）\n✅ 每章有独特的结束方式（不同悬念、转折、情感收尾）\n✅ key_events在相邻章节间绝不重叠\n✅ plot_summary描述该章独特内容，不与其他章雷同\n✅ 同一事件的不同阶段要明确区分\"前、中、后\"\n\n【章节间要求】\n✅ 衔接自然流畅（每章从不同起点开始）\n✅ 剧情递进合理（但不超出当前大纲边界）\n✅ 节奏张弛有度\n✅ 每章有明确且独特的叙事价值\n✅ 最后一章结束时恰好完成当前大纲内容\n✅ 关键事件无重叠：检查相邻章节key_events\n\n【禁止事项】\n❌ 输出非JSON格式\n❌ 剧情越界到后续大纲\n❌ 相邻章节内容重复\n❌ 关键事件雷同\n</constraints>",
      "description": "将大纲节点展开为详细章节规划（单批次）",
      "category": "情节展开",
      "parameters": "[\"project_title\", \"project_genre\", \"project_theme\", \"project_narrative_perspective\", \"project_world_time_period\", \"project_world_location\", \"project_world_atmosphere\", \"characters_info\", \"outline_order_index\", \"outline_title\", \"outline_content\", \"context_info\", \"strategy_instruction\", \"target_chapter_count\", \"scene_instruction\", \"scene_field\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "265bac54da03a182"
    },
    {
      "template_key": "OUTLINE_EXPAND_MULTI",
      "template_name": "大纲分批展开",
      "template_content": "<system>\n你是专业的小说情节架构师，擅长分批展开大纲节点。\n</system>\n\n<task>\n【展开任务】\n继续展开第{outline_order_index}节大纲《{outline_title}》，生成第{start_index}-{end_index}节（共{target_chapter_count}个章节）的详细规划。\n\n【分批说明】\n- 这是整个展开的一部分\n- 必须与前面已生成的章节自然衔接\n- 从第{start_index}节开始编号\n- 继续深化当前大纲内容\n\n【展开策略】\n{strategy_instruction}\n</task>\n\n<project priority=\"P1\">\n【项目信息】\n小说名称：{project_title}\n类型：{project_genre}\n主题：{project_theme}\n叙事视角：{project_narrative_perspective}\n\n【世界观背景】\n时间背景：{project_world_time_period}\n地理位置：{project_world_location}\n氛围基调：{project_world_atmosphere}\n</project>\n\n<characters priority=\"P1\">\n【角色信息】\n{characters_info}\n</characters>\n\n<outline_node priority=\"P0\">\n【当前大纲节点 - 展开对象】\n序号：第 {outline_order_index} 节\n标题：{outline_title}\n内容：{outline_content}\n</outline_node>\n\n<context priority=\"P2\">\n【上下文参考】\n{context_info}\n\n【已生成的前序章节】\n{previous_context}\n</context>\n\n<output priority=\"P0\">\n【输出格式】\n返回第{start_index}-{end_index}节章节规划的JSON数组（共{target_chapter_count}个对象）：\n\n[\n  {{\n    \"sub_index\": {start_index},\n    \"title\": \"章节标题\",\n    \"plot_summary\": \"剧情摘要（200-300字）：详细描述该章发生的事件\",\n    \"key_events\": [\"关键事件1\", \"关键事件2\", \"关键事件3\"],\n    \"character_focus\": [\"角色A\", \"角色B\"],\n    \"emotional_tone\": \"情感基调\",\n    \"narrative_goal\": \"叙事目标\",\n    \"conflict_type\": \"冲突类型\",\n    \"estimated_words\": 3000{scene_field}\n  }}\n]\n\n【格式规范】\n- 纯JSON数组输出，无其他文字\n- 内容描述中严禁使用特殊符号\n- sub_index从{start_index}开始\n</output>\n\n<constraints>\n【⚠️ 内容边界约束】\n✅ 只能展开当前大纲节点的内容\n✅ 深化当前大纲，而非跨越到后续\n✅ 放慢叙事节奏\n\n❌ 绝对不能推进到后续大纲内容\n❌ 不要让剧情快速推进\n\n【分批连续性约束】\n✅ 与前面已生成章节自然衔接\n✅ 从第{start_index}节开始编号\n✅ 保持叙事连贯性\n\n【🔴 相邻章节差异化约束（防止重复）】\n✅ 每章有独特的开场和结束方式\n✅ key_events在相邻章节间绝不重叠\n✅ plot_summary描述该章独特内容\n✅ 特别注意与前序章节的差异化\n✅ 避免重复已有内容\n\n【章节间要求】\n✅ 与前面章节衔接自然流畅\n✅ 剧情递进合理（但不超出当前大纲边界）\n✅ 节奏张弛有度\n✅ 每章有明确且独特的叙事价值\n✅ 关键事件无重叠：检查本批次和前序章节的key_events\n\n【禁止事项】\n❌ 输出非JSON格式\n❌ 剧情越界到后续大纲\n❌ 相邻章节内容重复\n❌ 与前序章节key_events雷同\n</constraints>",
      "description": "将大纲节点展开为详细章节规划（分批）",
      "category": "情节展开",
      "parameters": "[\"project_title\", \"project_genre\", \"project_theme\", \"project_narrative_perspective\", \"project_world_time_period\", \"project_world_location\", \"project_world_atmosphere\", \"characters_info\", \"outline_order_index\", \"outline_title\", \"outline_content\", \"context_info\", \"previous_context\", \"strategy_instruction\", \"start_index\", \"end_index\", \"target_chapter_count\", \"scene_instruction\", \"scene_field\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "57fea077bc4bdc35"
    },
    {
      "template_key": "MCP_TOOL_TEST",
      "template_name": "MCP工具测试(用户提示词)",
      "template_content": "你是MCP插件测试助手，需要测试插件 '{plugin_name}' 的功能。\n\n⚠️ 重要规则：生成参数时，必须严格使用工具 schema 中定义的原始参数名称，不要转换为 snake_case 或其他格式。\n例如：如果 schema 中是 'nextThoughtNeeded'，就必须使用 'nextThoughtNeeded'，不能改成 'next_thought_needed'。\n\n请选择一个合适的工具进行测试，优先选择搜索、查询类工具。\n生成真实有效的测试参数（例如搜索\"人工智能最新进展\"而不是\"test\"）。\n\n现在开始测试这个插件。",
      "description": "用于测试MCP插件功能的用户提示词",
      "category": "MCP测试",
      "parameters": "[\"plugin_name\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "9468e6cf02990aad"
    },
    {
      "template_key": "MCP_TOOL_TEST_SYSTEM",
      "template_name": "MCP工具测试(系统提示词)",
      "template_content": "你是专业的API测试工具。当给定工具列表时，选择一个工具并使用合适的参数调用它。\n\n⚠️ 关键规则：调用工具时，必须严格使用 schema 中定义的原始参数名，不要自行转换命名风格。\n- 如果参数名是 camelCase（如 nextThoughtNeeded），就使用 camelCase\n- 如果参数名是 snake_case（如 next_thought），就使用 snake_case\n- 保持与 schema 中定义的完全一致，包括大小写和命名风格",
      "description": "用于测试MCP插件功能的系统提示词",
      "category": "MCP测试",
      "parameters": "[]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "81a68493eced3cde"
    },
    {
      "template_key": "MCP_WORLD_BUILDING_PLANNING",
      "template_name": "MCP世界观规划",
      "template_content": "你正在为小说《{title}》设计世界观。\n\n【小说信息】\n- 题材：{genre}\n- 主题：{theme}\n- 简介：{description}\n\n【任务】\n请使用可用工具搜索相关背景资料，帮助构建更真实、更有深度的世界观设定。\n你可以查询：\n1. 历史背景（如果是历史题材）\n2. 地理环境和文化特征\n3. 相关领域的专业知识\n4. 类似作品的设定参考\n\n请查询最关键的1个问题（不要超过1个）。",
      "description": "使用MCP工具搜索资料辅助世界观设计",
      "category": "MCP增强",
      "parameters": "[\"title\", \"genre\", \"theme\", \"description\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "d04ca476537aa400"
    },
    {
      "template_key": "MCP_CHARACTER_PLANNING",
      "template_name": "MCP角色规划",
      "template_content": "你正在为小说《{title}》设计角色。\n\n【小说信息】\n- 题材：{genre}\n- 主题：{theme}\n- 时代背景：{time_period}\n- 地理位置：{location}\n\n【任务】\n请使用可用工具搜索相关参考资料，帮助设计更真实、更有深度的角色。\n你可以查询：\n1. 该时代/地域的真实历史人物特征\n2. 文化背景和社会习俗\n3. 职业特点和生活方式\n4. 相关领域的人物原型\n\n请查询最关键的1个问题（不要超过1个）。",
      "description": "使用MCP工具搜索资料辅助角色设计",
      "category": "MCP增强",
      "parameters": "[\"title\", \"genre\", \"theme\", \"time_period\", \"location\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "d71419acf3f80704"
    },
    {
      "template_key": "AUTO_CHARACTER_ANALYSIS",
      "template_name": "自动角色分析",
      "template_content": "<system>\n你是专业的小说角色设计顾问，擅长预测剧情发展对角色的需求。\n</system>\n\n<task>\n【分析任务】\n预测在接下来的{chapter_count}章续写中，根据剧情发展方向和阶段，是否需要引入新角色。\n\n【重要说明】\n这是预测性分析，而非基于已生成内容的事后分析。\n</task>\n\n<project priority=\"P1\">\n【项目信息】\n书名：{title}\n类型：{genre}\n主题：{theme}\n\n【世界观】\n时间背景：{time_period}\n地理位置：{location}\n氛围基调：{atmosphere}\n</project>\n\n<context priority=\"P0\">\n【已有角色】\n{existing_characters}\n\n【已有章节概览】\n{all_chapters_brief}\n\n【续写计划】\n- 起始章节：第{start_chapter}章\n- 续写数量：{chapter_count}章\n- 剧情阶段：{plot_stage}\n- 发展方向：{story_direction}\n</context>\n\n<analysis_framework priority=\"P0\">\n【预测分析维度】\n\n**1. 剧情需求预测**\n根据发展方向，哪些场景、冲突需要新角色参与？\n\n**2. 角色充分性**\n现有角色是否足以支撑即将发生的剧情？\n\n**3. 引入时机**\n新角色应该在哪个章节登场最合适？\n\n**4. 重要性判断**\n新角色对后续剧情的影响程度如何？\n\n【预测依据】\n- 剧情阶段的典型角色需求（如：高潮阶段可能需要强力对手）\n- 故事发展方向的逻辑需要（如：进入新地点需要当地角色）\n- 冲突升级的角色需求（如：更强的反派、意外的盟友）\n- 世界观扩展的需要（如：新组织、新势力的代表）\n</analysis_framework>\n\n<output priority=\"P0\">\n【输出格式】\n返回纯JSON对象（两种情况之一）：\n\n**情况A：需要新角色**\n{{\n  \"needs_new_characters\": true,\n  \"reason\": \"预测分析原因（150-200字），说明为什么即将的剧情需要新角色\",\n  \"character_count\": 2,\n  \"character_specifications\": [\n    {{\n      \"name\": \"建议的角色名字（可选）\",\n      \"role_description\": \"角色在剧情中的定位和作用（100-150字）\",\n      \"suggested_role_type\": \"supporting/antagonist/protagonist\",\n      \"importance\": \"high/medium/low\",\n      \"appearance_chapter\": {start_chapter},\n      \"key_abilities\": [\"能力1\", \"能力2\"],\n      \"plot_function\": \"在剧情中的具体功能\",\n      \"relationship_suggestions\": [\n        {{\n          \"target_character\": \"现有角色名\",\n          \"relationship_type\": \"建议的关系类型\",\n          \"reason\": \"为什么建立这种关系\"\n        }}\n      ]\n    }}\n  ]\n}}\n\n**情况B：不需要新角色**\n{{\n  \"needs_new_characters\": false,\n  \"reason\": \"现有角色足以支撑即将的剧情发展，说明理由\"\n}}\n</output>\n\n<constraints>\n【必须遵守】\n✅ 这是预测性分析，面向未来剧情\n✅ 考虑剧情的自然发展和节奏\n✅ 确保引入必要性，不为引入而引入\n✅ 优先考虑角色的长期作用\n\n【禁止事项】\n❌ 输出markdown标记\n❌ 基于已生成内容做事后分析\n❌ 为了引入角色而强行引入\n❌ 设计一次性功能角色\n</constraints>",
      "description": "分析新生成的大纲，判断是否需要引入新角色",
      "category": "自动角色引入",
      "parameters": "[\"title\", \"genre\", \"theme\", \"time_period\", \"location\", \"atmosphere\", \"existing_characters\", \"new_outlines\", \"start_chapter\", \"end_chapter\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "3e366acd3fd01d43"
    },
    {
      "template_key": "AUTO_CHARACTER_GENERATION",
      "template_name": "自动角色生成",
      "template_content": "<system>\n你是专业的角色设定师，擅长根据剧情需求创建完整的角色设定。\n</system>\n\n<task>\n【生成任务】\n为小说生成新角色的完整设定，包括基本信息、性格背景、关系网络和职业信息。\n</task>\n\n<project priority=\"P1\">\n【项目信息】\n书名：{title}\n类型：{genre}\n主题：{theme}\n\n【世界观】\n时间背景：{time_period}\n地理位置：{location}\n氛围基调：{atmosphere}\n世界规则：{rules}\n</project>\n\n<context priority=\"P0\">\n【已有角色】\n{existing_characters}\n\n【剧情上下文】\n{plot_context}\n\n【角色规格要求】\n{character_specification}\n</context>\n\n<mcp_context priority=\"P2\">\n【MCP工具参考】\n{mcp_references}\n</mcp_context>\n\n<requirements priority=\"P0\">\n【核心要求】\n1. 角色必须符合剧情需求和世界观设定\n2. **必须分析新角色与已有角色的关系**，至少建立1-3个有意义的关系\n3. 性格、背景要有深度和独特性\n4. 外貌描写要具体生动\n5. 特长和能力要符合角色定位\n6. **如果【已有角色】中包含职业列表，必须为角色设定职业**\n\n【关系建立指导】\n- 仔细审视【已有角色】列表，思考新角色与哪些现有角色有联系\n- 根据剧情需求，建立合理的角色关系\n- 每个关系都要有明确的类型、亲密度和描述\n- 关系应该服务于剧情发展\n- 如果新角色是组织成员，记得填写organization_memberships\n\n【职业信息要求】\n如果【已有角色】部分包含\"可用主职业列表\"或\"可用副职业列表\"：\n- 仔细查看可用的主职业和副职业列表\n- 根据角色的背景、能力、故事定位，选择最合适的职业\n- 主职业：从\"可用主职业列表\"中选择一个，填写职业名称\n- 主职业阶段：根据职业的阶段信息和角色实力，设定合理的当前阶段\n- 副职业：可选择0-2个副职业\n- ⚠️ 重要：必须填写职业的名称而非ID\n</requirements>\n\n<output priority=\"P0\">\n【输出格式】\n返回纯JSON对象：\n\n{{\n  \"name\": \"角色姓名\",\n  \"age\": 25,\n  \"gender\": \"男/女/其他\",\n  \"role_type\": \"supporting\",\n  \"personality\": \"性格特点的详细描述（100-200字）\",\n  \"background\": \"背景故事的详细描述（100-200字）\",\n  \"appearance\": \"外貌描述（50-100字）\",\n  \"traits\": [\"特长1\", \"特长2\", \"特长3\"],\n  \"relationships_text\": \"用自然语言描述该角色与其他角色的关系网络\",\n  \n  \"relationships\": [\n    {{\n      \"target_character_name\": \"已存在的角色名称\",\n      \"relationship_type\": \"关系类型\",\n      \"intimacy_level\": 75,\n      \"description\": \"关系的具体描述\",\n      \"status\": \"active\"\n    }}\n  ],\n  \"organization_memberships\": [\n    {{\n      \"organization_name\": \"已存在的组织名称\",\n      \"position\": \"职位\",\n      \"rank\": 5,\n      \"loyalty\": 80\n    }}\n  ],\n  \n  \"career_info\": {{\n    \"main_career_name\": \"从可用主职业列表中选择的职业名称\",\n    \"main_career_stage\": 5,\n    \"sub_careers\": [\n      {{\n        \"career_name\": \"从可用副职业列表中选择的职业名称\",\n        \"stage\": 3\n      }}\n    ]\n  }}\n}}\n\n【关系类型参考】\n家族、社交、职业、敌对等各类关系\n\n【数值范围】\n- intimacy_level：-100到100（负值表示敌对）\n- loyalty：0到100\n- rank：0到10\n</output>\n\n<constraints>\n【必须遵守】\n✅ 符合剧情需求和世界观设定\n✅ relationships数组必填：至少1-3个关系\n✅ target_character_name必须精确匹配【已有角色】\n✅ organization_memberships只能引用已存在的组织\n✅ 职业选择必须从可用列表中选择\n\n【禁止事项】\n❌ 输出markdown标记\n❌ 在描述中使用特殊符号\n❌ 引用不存在的角色或组织\n❌ 使用职业ID而非职业名称\n</constraints>",
      "description": "根据剧情需求自动生成新角色的完整设定",
      "category": "自动角色引入",
      "parameters": "[\"title\", \"genre\", \"theme\", \"time_period\", \"location\", \"atmosphere\", \"rules\", \"existing_characters\", \"plot_context\", \"character_specification\", \"mcp_references\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "dae8f1b079d7efb2"
    },
    {
      "template_key": "AUTO_ORGANIZATION_ANALYSIS",
      "template_name": "自动组织分析",
      "template_content": "<system>\n你是专业的小说世界构建顾问，擅长预测剧情发展对组织/势力的需求。\n</system>\n\n<task>\n【分析任务】\n预测在接下来的{chapter_count}章续写中，根据剧情发展方向和阶段，是否需要引入新的组织或势力。\n\n【重要说明】\n这是预测性分析，而非基于已生成内容的事后分析。\n组织包括：帮派、门派、公司、政府机构、神秘组织、家族等。\n</task>\n\n<project priority=\"P1\">\n【项目信息】\n书名：{title}\n类型：{genre}\n主题：{theme}\n\n【世界观】\n时间背景：{time_period}\n地理位置：{location}\n氛围基调：{atmosphere}\n</project>\n\n<context priority=\"P0\">\n【已有组织】\n{existing_organizations}\n\n【已有角色】\n{existing_characters}\n\n【已有章节概览】\n{all_chapters_brief}\n\n【续写计划】\n- 起始章节：第{start_chapter}章\n- 续写数量：{chapter_count}章\n- 剧情阶段：{plot_stage}\n- 发展方向：{story_direction}\n</context>\n\n<analysis_framework priority=\"P0\">\n【预测分析维度】\n\n**1. 世界观扩展需求**\n根据发展方向，是否需要新的势力或组织来丰富世界观？\n\n**2. 冲突升级需求**\n剧情是否需要新的对立势力、竞争组织或神秘集团？\n\n**3. 角色归属需求**\n现有角色是否需要加入或对抗某个新组织？\n\n**4. 剧情推动需求**\n新组织能否成为推动剧情的关键力量？\n\n**5. 引入时机**\n新组织应该在哪个章节出现最合适？\n\n【预测依据】\n- 剧情阶段的典型组织需求（如：高潮阶段可能需要强大的敌对势力）\n- 故事发展方向的逻辑需要（如：进入新地点需要当地势力）\n- 世界观完整性需要（如：权力格局需要多方势力）\n- 角色成长需要（如：主角需要加入或创建组织）\n</analysis_framework>\n\n<output priority=\"P0\">\n【输出格式】\n返回纯JSON对象（两种情况之一）：\n\n**情况A：需要新组织**\n{{\n\"needs_new_organizations\": true,\n\"reason\": \"预测分析原因（150-200字），说明为什么即将的剧情需要新组织\",\n\"organization_count\": 1,\n\"organization_specifications\": [\n{{\n  \"name\": \"建议的组织名字（可选）\",\n  \"organization_description\": \"组织在剧情中的定位和作用（100-150字）\",\n  \"organization_type\": \"帮派/门派/公司/政府/家族/神秘组织等\",\n  \"importance\": \"high/medium/low\",\n  \"appearance_chapter\": {start_chapter},\n  \"power_level\": 70,\n  \"plot_function\": \"在剧情中的具体功能\",\n  \"location\": \"组织所在地或活动区域\",\n  \"motto\": \"组织口号或宗旨（可选）\",\n  \"initial_members\": [\n    {{\n      \"character_name\": \"现有角色名（如需加入）\",\n      \"position\": \"职位\",\n      \"reason\": \"为什么加入\"\n    }}\n  ],\n  \"relationship_suggestions\": [\n    {{\n      \"target_organization\": \"已有组织名\",\n      \"relationship_type\": \"建议的关系类型（盟友/敌对/竞争/合作等）\",\n      \"reason\": \"为什么建立这种关系\"\n    }}\n  ]\n}}\n]\n}}\n\n**情况B：不需要新组织**\n{{\n\"needs_new_organizations\": false,\n\"reason\": \"现有组织足以支撑即将的剧情发展，说明理由\"\n}}\n</output>\n\n<constraints>\n【必须遵守】\n✅ 这是预测性分析，面向未来剧情\n✅ 考虑世界观的丰富性和完整性\n✅ 确保引入必要性，不为引入而引入\n✅ 优先考虑组织的长期作用\n✅ 组织应该是推动剧情的关键力量\n\n【禁止事项】\n❌ 输出markdown标记\n❌ 基于已生成内容做事后分析\n❌ 为了引入组织而强行引入\n❌ 设计一次性功能组织\n❌ 创建与现有组织功能重复的组织\n</constraints>",
      "description": "分析新生成的大纲，判断是否需要引入新组织",
      "category": "自动组织引入",
      "parameters": "[\"title\", \"genre\", \"theme\", \"time_period\", \"location\", \"atmosphere\", \"existing_organizations\", \"existing_characters\", \"all_chapters_brief\", \"start_chapter\", \"chapter_count\", \"plot_stage\", \"story_direction\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "b9035e53d2a77b69"
    },
    {
      "template_key": "AUTO_ORGANIZATION_GENERATION",
      "template_name": "自动组织生成",
      "template_content": "<system>\n你是专业的世界构建师，擅长根据剧情需求创建完整的组织/势力设定。\n</system>\n\n<task>\n【生成任务】\n为小说生成新组织的完整设定，包括基本信息、组织特性、背景历史和成员结构。\n</task>\n\n<project priority=\"P1\">\n【项目信息】\n书名：{title}\n类型：{genre}\n主题：{theme}\n\n【世界观】\n时间背景：{time_period}\n地理位置：{location}\n氛围基调：{atmosphere}\n世界规则：{rules}\n</project>\n\n<context priority=\"P0\">\n【已有组织】\n{existing_organizations}\n\n【已有角色】\n{existing_characters}\n\n【剧情上下文】\n{plot_context}\n\n【组织规格要求】\n{organization_specification}\n</context>\n\n<mcp_context priority=\"P2\">\n【MCP工具参考】\n{mcp_references}\n</mcp_context>\n\n<requirements priority=\"P0\">\n【核心要求】\n1. 组织必须符合剧情需求和世界观设定\n2. 组织要有明确的目的、结构和特色\n3. 组织特性、背景要有深度和独特性\n4. 外在表现要具体生动\n5. 考虑与已有组织的关系和互动\n6. 如果需要，可以建议将现有角色加入组织\n</requirements>\n\n<output priority=\"P0\">\n【输出格式】\n返回纯JSON对象：\n\n{{\n\"name\": \"组织名称\",\n\"is_organization\": true,\n\"role_type\": \"supporting\",\n\"organization_type\": \"组织类型（帮派/门派/公司/政府/家族/神秘组织等）\",\n\"personality\": \"组织特性的详细描述（150-200字）：运作方式、核心理念、行事风格、文化价值观\",\n\"background\": \"组织背景故事（200-300字）：建立历史、发展历程、重要事件、当前地位\",\n\"appearance\": \"外在表现（100-150字）：总部位置、标志性建筑、组织标志、成员着装\",\n\"organization_purpose\": \"组织目的和宗旨：明确目标、长期愿景、行动准则\",\n\"power_level\": 75,\n\"location\": \"所在地点：主要活动区域、势力范围\",\n\"motto\": \"组织格言或口号\",\n\"color\": \"组织代表颜色\",\n\"traits\": [\"特征1\", \"特征2\", \"特征3\"],\n\n\"initial_members\": [\n{{\n  \"character_name\": \"已存在的角色名称\",\n  \"position\": \"职位名称\",\n  \"rank\": 8,\n  \"loyalty\": 80,\n  \"joined_at\": \"加入时间（可选）\",\n  \"status\": \"active\"\n}}\n],\n\n\"organization_relationships\": [\n{{\n  \"target_organization_name\": \"已存在的组织名称\",\n  \"relationship_type\": \"盟友/敌对/竞争/合作/从属等\",\n  \"description\": \"关系的具体描述\"\n}}\n]\n}}\n\n【数值范围】\n- power_level：0-100的整数，表示在世界中的影响力\n- rank：0到10（职位等级）\n- loyalty：0到100（成员忠诚度）\n</output>\n\n<constraints>\n【必须遵守】\n✅ 符合剧情需求和世界观设定\n✅ 组织要有独特的定位和价值\n✅ character_name必须精确匹配【已有角色】\n✅ target_organization_name必须精确匹配【已有组织】\n✅ 组织能够推动剧情发展\n\n【禁止事项】\n❌ 输出markdown标记\n❌ 在描述中使用特殊符号\n❌ 引用不存在的角色或组织\n❌ 创建功能与现有组织重复的组织\n❌ 创建对剧情没有实际作用的组织\n</constraints>",
      "description": "根据剧情需求自动生成新组织的完整设定",
      "category": "自动组织引入",
      "parameters": "[\"title\", \"genre\", \"theme\", \"time_period\", \"location\", \"atmosphere\", \"rules\", \"existing_organizations\", \"existing_characters\", \"plot_context\", \"organization_specification\", \"mcp_references\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "ff4060761349d8c0"
    },
    {
      "template_key": "CAREER_SYSTEM_GENERATION",
      "template_name": "职业体系生成",
      "template_content": "<system>\n你是专业的职业体系设计师，擅长为不同世界观设计完整的职业体系。\n</system>\n\n<task>\n【设计任务】\n根据世界观信息和项目简介，设计一个完整且合理的职业体系。\n职业体系必须与项目简介中的故事背景和角色设定高度契合。\n\n【数量要求】\n- 主职业：精确生成3个\n- 副职业：精确生成2个\n</task>\n\n<worldview priority=\"P0\">\n【项目信息】\n书名：{title}\n类型：{genre}\n主题：{theme}\n简介：{description}\n\n【世界观设定】\n时间背景：{time_period}\n地理位置：{location}\n氛围基调：{atmosphere}\n世界规则：{rules}\n</worldview>\n\n<design_requirements priority=\"P0\">\n【设计要求】\n\n**1. 主职业（main_careers）- 必须精确生成3个**\n- 主职业是角色的核心发展方向\n- 必须严格符合世界观规则和简介中的故事背景\n- 3个主职业应该覆盖不同的发展路线（如：战斗型、智慧型、特殊型）\n- 每个主职业的阶段数量可以不同（体现职业复杂度差异）\n- 职业设计要能支撑简介中描述的故事情节\n\n**2. 副职业（sub_careers）- 必须精确生成2个**\n- 副职业包含生产、辅助、特殊技能类\n- 2个副职业应该具有互补性，丰富角色的多样性\n- 每个副职业的阶段数量可以不同\n- 不要让所有副职业都是相同的阶段数\n- 副职业要能为主职业提供辅助或增益\n\n**3. 阶段设计（stages）**\n- 每个职业的stages数组长度必须等于max_stage\n- 阶段名称要符合世界观文化背景\n- 阶段描述要体现明确的能力提升路径\n- 确保职业间的阶段数量有差异\n- 主职业阶段数建议：8-12个\n- 副职业阶段数建议：5-8个\n\n**4. 简介契合度**\n- 职业体系必须与项目简介中的故事设定相匹配\n- 如果简介中提到特定职业或能力，优先设计相关职业\n- 职业的能力和特点要能支撑简介中的情节发展\n</design_requirements>\n\n<output priority=\"P0\">\n【输出格式】\n返回纯JSON对象：\n\n{{\n\"main_careers\": [\n{{\n  \"name\": \"职业名称\",\n  \"description\": \"职业描述（100-150字）\",\n  \"category\": \"职业分类\",\n  \"stages\": [\n    {{\"level\": 1, \"name\": \"阶段1名称\", \"description\": \"阶段描述\"}},\n    {{\"level\": 2, \"name\": \"阶段2名称\", \"description\": \"阶段描述\"}}\n  ],\n  \"max_stage\": 整数,\n  \"requirements\": \"职业要求和前置条件\",\n  \"special_abilities\": \"职业特殊能力\",\n  \"worldview_rules\": \"与世界观规则的关联\",\n  \"attribute_bonuses\": {{\"strength\": \"+10%\"}}\n}}\n],\n\"sub_careers\": [\n{{\n  \"name\": \"副职业名称\",\n  \"description\": \"职业描述（80-120字）\",\n  \"category\": \"生产系/辅助系/特殊系\",\n  \"stages\": [\n    {{\"level\": 1, \"name\": \"阶段1名称\", \"description\": \"阶段描述\"}}\n  ],\n  \"max_stage\": 整数,\n  \"requirements\": \"职业要求\",\n  \"special_abilities\": \"特殊能力\"\n}}\n]\n}}\n</output>\n\n<constraints>\n【必须遵守】\n✅ 主职业数量：必须精确生成3个，不多不少\n✅ 副职业数量：必须精确生成2个，不多不少\n✅ 不同职业的max_stage必须不同\n✅ 主职业阶段数建议：8-12个\n✅ 副职业阶段数建议：5-8个\n✅ stages数组长度必须等于max_stage\n✅ 确保职业体系与世界观高度契合\n✅ 职业设计必须支撑项目简介中的故事情节\n\n【禁止事项】\n❌ 生成超过3个主职业或少于3个主职业\n❌ 生成超过2个副职业或少于2个副职业\n❌ 所有职业使用相同的阶段数\n❌ 输出markdown标记\n❌ 职业设计与世界观或简介脱节\n❌ 忽略简介中提到的职业或能力设定\n</constraints>",
      "description": "根据世界观和项目简介自动生成完整的职业体系，包括主职业和副职业",
      "category": "世界构建",
      "parameters": "[\"title\", \"genre\", \"theme\", \"description\", \"time_period\", \"location\", \"atmosphere\", \"rules\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "90f1694b69810f42"
    },
    {
      "template_key": "INSPIRATION_TITLE_SYSTEM",
      "template_name": "灵感模式-书名生成(系统提示词)",
      "template_content": "你是一位专业的小说创作顾问。\n用户的原始想法：{initial_idea}\n\n请根据用户的想法，生成6个吸引人的书名建议，要求：\n1. 紧扣用户的原始想法和核心故事构思\n2. 富有创意和吸引力\n3. 涵盖不同的风格倾向\n4. 书名中不要带有\"《》\"符号\n\n返回JSON格式：\n{{\n    \"prompt\": \"根据你的想法，我为你准备了几个书名建议：\",\n    \"options\": [\"书名1\", \"书名2\", \"书名3\", \"书名4\", \"书名5\", \"书名6\"]\n}}\n\n只返回纯JSON，不要有其他文字。",
      "description": "根据用户的原始想法生成6个书名建议的系统提示词",
      "category": "灵感模式",
      "parameters": "[\"initial_idea\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "fdf988ebe4b88255"
    },
    {
      "template_key": "INSPIRATION_TITLE_USER",
      "template_name": "灵感模式-书名生成(用户提示词)",
      "template_content": "用户的想法：{initial_idea}\n请生成6个书名建议",
      "description": "根据用户的原始想法生成6个书名建议的用户提示词",
      "category": "灵感模式",
      "parameters": "[\"initial_idea\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "100721d190c50d89"
    },
    {
      "template_key": "INSPIRATION_DESCRIPTION_SYSTEM",
      "template_name": "灵感模式-简介生成(系统提示词)",
      "template_content": "你是一位专业的小说创作顾问。\n用户的原始想法：{initial_idea}\n已确定的书名：{title}\n\n请生成6个精彩的小说简介，要求：\n1. 必须紧扣用户的原始想法，确保简介是原始想法的具体展开\n2. 符合已确定的书名风格\n3. 简洁有力，每个50-100字\n4. 包含核心冲突\n5. 涵盖不同的故事走向，但都基于用户的原始构思\n\n返回JSON格式：\n{{\"prompt\":\"选择一个简介：\",\"options\":[\"简介1\",\"简介2\",\"简介3\",\"简介4\",\"简介5\",\"简介6\"]}}\n\n只返回纯JSON，不要有其他文字，不要换行。",
      "description": "根据用户想法和书名生成6个简介选项的系统提示词",
      "category": "灵感模式",
      "parameters": "[\"initial_idea\", \"title\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "5a4748a02680b9c3"
    },
    {
      "template_key": "INSPIRATION_DESCRIPTION_USER",
      "template_name": "灵感模式-简介生成(用户提示词)",
      "template_content": "原始想法：{initial_idea}\n书名：{title}\n请生成6个简介选项",
      "description": "根据用户想法和书名生成6个简介选项的用户提示词",
      "category": "灵感模式",
      "parameters": "[\"initial_idea\", \"title\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "dd565bcd1fdf6bfa"
    },
    {
      "template_key": "INSPIRATION_THEME_SYSTEM",
      "template_name": "灵感模式-主题生成(系统提示词)",
      "template_content": "你是一位专业的小说创作顾问。\n用户的原始想法：{initial_idea}\n小说信息：\n- 书名：{title}\n- 简介：{description}\n\n请生成6个深刻的主题选项，要求：\n1. 必须与用户的原始想法保持高度一致\n2. 符合书名和简介的风格\n3. 有深度和思想性\n4. 每个50-150字\n5. 涵盖不同角度（如：成长、复仇、救赎、探索等），但都围绕用户的核心构思\n\n返回JSON格式：\n{{\"prompt\":\"这本书的核心主题是什么？\",\"options\":[\"主题1\",\"主题2\",\"主题3\",\"主题4\",\"主题5\",\"主题6\"]}}\n\n只返回纯JSON，不要有其他文字，不要换行。",
      "description": "根据书名和简介生成6个深刻的主题选项的系统提示词",
      "category": "灵感模式",
      "parameters": "[\"initial_idea\", \"title\", \"description\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "cee73782e0b1936b"
    },
    {
      "template_key": "INSPIRATION_THEME_USER",
      "template_name": "灵感模式-主题生成(用户提示词)",
      "template_content": "原始想法：{initial_idea}\n书名：{title}\n简介：{description}\n请生成6个主题选项",
      "description": "根据书名和简介生成6个深刻的主题选项的用户提示词",
      "category": "灵感模式",
      "parameters": "[\"initial_idea\", \"title\", \"description\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "7ad2b1c712189ca2"
    },
    {
      "template_key": "INSPIRATION_GENRE_SYSTEM",
      "template_name": "灵感模式-类型生成(系统提示词)",
      "template_content": "你是一位专业的小说创作顾问。\n用户的原始想法：{initial_idea}\n小说信息：\n- 书名：{title}\n- 简介：{description}\n- 主题：{theme}\n\n请生成6个合适的类型标签（每个2-4字），要求：\n1. 必须符合用户原始想法中暗示的类型倾向\n2. 符合小说整体风格\n3. 可以多选组合\n\n常见类型：玄幻、都市、科幻、武侠、仙侠、历史、言情、悬疑、奇幻、修仙等\n\n返回JSON格式：\n{{\"prompt\":\"选择类型标签（可多选）：\",\"options\":[\"类型1\",\"类型2\",\"类型3\",\"类型4\",\"类型5\",\"类型6\"]}}\n\n只返回紧凑的纯JSON，不要换行，不要有其他文字。",
      "description": "根据小说信息生成6个合适的类型标签的系统提示词",
      "category": "灵感模式",
      "parameters": "[\"initial_idea\", \"title\", \"description\", \"theme\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "a941f9c355393e0f"
    },
    {
      "template_key": "INSPIRATION_GENRE_USER",
      "template_name": "灵感模式-类型生成(用户提示词)",
      "template_content": "原始想法：{initial_idea}\n书名：{title}\n简介：{description}\n主题：{theme}\n请生成6个类型标签",
      "description": "根据小说信息生成6个合适的类型标签的用户提示词",
      "category": "灵感模式",
      "parameters": "[\"initial_idea\", \"title\", \"description\", \"theme\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "c772427aef6c87c3"
    },
    {
      "template_key": "INSPIRATION_QUICK_COMPLETE",
      "template_name": "灵感模式-智能补全",
      "template_content": "你是一位专业的小说创作顾问。用户提供了部分小说信息，请补全缺失的字段。\n\n用户已提供的信息：\n{existing}\n\n请生成完整的小说方案，包含：\n1. title: 书名（3-6字，如果用户已提供则保持原样）\n2. description: 简介（50-100字，必须基于用户提供的信息，不要偏离原意）\n3. theme: 核心主题（30-50字，必须与用户提供的信息保持一致）\n4. genre: 类型标签数组（2-3个）\n\n重要：所有补全的内容都必须与用户提供的信息保持高度关联，确保前后一致性。\n\n返回JSON格式：\n{{\n    \"title\": \"书名\",\n    \"description\": \"简介内容...\",\n    \"theme\": \"主题内容...\",\n    \"genre\": [\"类型1\", \"类型2\"]\n}}\n\n只返回纯JSON，不要有其他文字。",
      "description": "根据用户提供的部分信息智能补全完整的小说方案",
      "category": "灵感模式",
      "parameters": "[\"existing\"]",
      "is_active": true,
      "is_customized": false,
      "system_content_hash": "ac4e36c6d088f75e"
    }
  ],
  "export_time": "2026-02-13T01:38:32.107860",
  "version": "2.0",
  "statistics": {
    "total": 33,
    "customized": 0,
    "system_default": 33
  }
}